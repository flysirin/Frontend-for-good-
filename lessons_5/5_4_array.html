<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Array</title>
</head>
<body>
<script>
    // Вызов new Array(number) создаёт массив с заданной длиной, но без элементов.
    //
    // Свойство length отражает длину массива или, если точнее, его последний цифровой индекс плюс один. Длина корректируется автоматически методами массива.
    //
    // Если мы уменьшаем length вручную, массив укорачивается.

    // Получение элементов:
    // Мы можем получить элемент по его индексу, например arr[0].
    // Также мы можем использовать метод at(i) для получения элементов с отрицательным индексом, для отрицательных значений i, он отступает от конца массива. В остальном он работает так же, как arr[i], если i >= 0.
    // Мы можем использовать массив как двустороннюю очередь, используя следующие операции:
    //
    // push(...items)добавляет items в конец массива.
    // pop() удаляет элемент в конце массива и возвращает его.
    // shift() удаляет элемент в начале массива и возвращает его.
    // unshift(...items) добавляет items в начало массива.
    //
    // Чтобы пройтись по элементам массива:
    // for (let i=0; i<arr.length; i++) – работает быстрее всего, совместим со старыми браузерами.
    // for (let item of arr) – современный синтаксис только для значений элементов (к индексам нет доступа).
    // for (let i in arr) – никогда не используйте для массивов!

    // -----------------------------------------------------------------------------------------------------------------

    let fruits = ["Яблоки", "Груша", "Апельсин"];
    // добавляем новое значение в "копию"
    let shoppingCart = fruits;
    shoppingCart.push("Банан");

    // что в fruits?
    // alert(fruits.length); // 4 ссылка на один объект
    // alert(fruits)

    // -----------------------------------------------------------------------------------------------------------------

    let styles = ['Jazz', 'Blues'];
    styles.push('Rock-n-Roll');
    styles[Math.floor((styles.length - 1) / 2)] = 'Classic';
    // alert(styles.shift());
    styles.unshift('Rap', 'Reggae');
    // alert(styles);

    // -----------------------------------------------------------------------------------------------------------------

    let arr = ["a", "b"];
    arr.push(function () {
        alert(this);
    });

    // arr[2](); // Add func to arr to the end of array,
    // call func, call alert(this),
    // now this call the obj arr and show it content
    // alert(arr[2]);

    // -----------------------------------------------------------------------------------------------------------------

    // Напишите функцию sumInput(), которая:
    // Просит пользователя ввести значения, используя prompt и сохраняет их в массив.
    // Заканчивает запрашивать значения, когда пользователь введёт не числовое значение, пустую строку или нажмёт «Отмена».
    // Подсчитывает и возвращает сумму элементов массива.

    //
    function sumInput() {
        let userArray = [];
        let value, sum;
        while (true) {
            value = prompt("Input digit", 0);
            if (!isFinite(value) || value == null) {
                sum = 0;
                for (let key of userArray) {
                    sum += +key;
                }
                return sum;
            }
            userArray.push(value);
        }

    }

    // alert(sumInput())

    // -----------------------------------------------------------------------------------------------------------------

    // На входе массив чисел, например: arr = [1, -2, 3, 4, -9, 6].
    // Задача: найти непрерывный подмассив в arr, сумма элементов в котором максимальна.
    // Функция getMaxSubSum(arr) должна возвращать эту сумму.
    //
    // getMaxSubSum([-1, 2, 3, -9]) == 5 (сумма выделенных элементов)
    // getMaxSubSum([2, -1, 2, 3, -9]) == 6
    // getMaxSubSum([-1, 2, 3, -9, 11]) == 11
    // getMaxSubSum([-2, -1, 1, 2]) == 3
    // getMaxSubSum([100, -9, 2, -3, 5]) == 100
    // getMaxSubSum([1, 2, 3]) == 6 (берём все)
    // Если все элементы отрицательные – ничего не берём(подмассив пустой) и сумма равна «0»:
    //
    // getMaxSubSum([-1, -2, -3]) = 0
    // Попробуйте придумать быстрое решение: O(n2), а лучше за О(n) операций.

    // v2.0
    function getSubSum_2(arr) {
        let max_sum = 0;
        let current_sum = 0;
        for (let value of arr) {
            current_sum = (current_sum + value > 0) ? current_sum + value : 0;
            max_sum = (max_sum > current_sum) ? max_sum : current_sum;
        }
        return max_sum
    }


    // test
    let digit_arrays = [
        [1, -2, 3, 4, -9, 6],
        [-1, 2, 3, -9],
        [2, -1, 2, 3, -9],
        [-1, 2, 3, -9, 11],
        [-2, -1, 1, 2],
        [100, -9, 2, -3, 5],
        [1, 2, 3],
        [-1, -2, -3],
        [1, 1, 1, -1, 1, 1, 1],
    ];

    for (let arr of digit_arrays) {
        console.log(getSubSum_2(arr))
    }

</script>
</body>
</html>
